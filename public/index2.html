//redis based code
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>YouTube Clone</title>
</head>
<body style="margin:0; display:grid; grid-template-rows: 60px 1fr; grid-template-columns: 100px 1fr;
             grid-template-areas: 'header header' 'sidebar main'; background-color:black; color:white; font-family:Arial, sans-serif; height:100vh;">

  <div style="grid-area: header; background-color: #202020; display: flex; align-items: center;
              justify-content: space-between; padding: 0 20px; border-bottom: 1px solid #333;">
    <h1 style="margin: 0; width: 220px; display: flex; justify-content: center; gap: 12px;">
      <img src="icon.png" alt="img" style="width: 60px;height: 50px;border-radius: 12px;"> YouTube
    </h1>
    <div style="display: flex; gap: 10px;">
      <input id="searchInput" type="text" placeholder="Search videos..." style="padding: 5px; font-size: 16px;" />
      <button onclick="searchVideos()" style="padding: 5px 10px;">ğŸ”</button>
      <button onclick="Speak()" style="padding: 5px 10px;">ğŸ¤</button>
    </div>
  </div>

  <div style="grid-area: sidebar; background-color: #121212;width:200px; border-radius: 12px;">
    <ul style="list-style: none; padding: 0; margin: 0;">
      <li style="padding: 10px; border-bottom: 1px solid gray;"><a href="#" style="color:white; text-decoration:none; font-weight: bolder; font-size: larger;">ğŸ  Home</a></li>
      <li style="padding: 10px; border-bottom: 1px solid gray;"><a href="#" style="color:white; text-decoration:none; font-weight: bolder; font-size: larger;">ğŸ”¥ Trending</a></li>
      <li style="padding: 10px; border-bottom: 1px solid gray;"><a href="#" style="color:white; text-decoration:none; font-weight: bolder; font-size: larger;">ğŸ“º Subscriptions</a></li>
      <li style="padding: 10px; border-bottom: 1px solid gray;"><a href="#" style="color:white; text-decoration:none; font-weight: bolder; font-size: larger;">ğŸ“‚ Library</a></li>
    </ul>
  </div>

  <div style="grid-area: main; padding: 15px; margin-left: 100px;">
    <div data-video-container style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 30px;">
    </div>
    <div class="output">
        <p id="output" style="text-align: center; font-size: 24px;">Waiting for speech input...</p>
    </div>
  </div>

  <script>
    async function searchVideos(transcript) {
      console.log("transcript:",transcript);
      const query = document.getElementById('searchInput').value || transcript;
      // console.log(query );
      
      if (!query) return alert('Please enter a search term');

      try {
        const res = await fetch(`/video?q=${encodeURIComponent(query)}`);
        const data = await res.json();
        // alert('fine')
        const container = document.querySelector('[data-video-container]');
        container.innerHTML = '';
        console.log("data:",data);
        

        data.forEach(video => {
          const videoCard = document.createElement('div');
          videoCard.style = "background-color:#2c2c2c;width: 320px; height:220px;border-radius: 5px; display:flex; align-items:center; justify-content:center;";

          videoCard.innerHTML = `
            <iframe src="https://www.youtube.com/embed/${video.videoId}" 
                    style="border-radius: 5px; width:360px ;height:240px" 
                    title="${video.title}" allowfullscreen loading="lazy"></iframe>
          `;

          container.appendChild(videoCard);
        });
      } catch (err) {
        console.error('Error fetching videos:', err);
        alert('Failed to load videos');
      }
    }

    async function Speak(){
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
             
               const scrib = {
                 show: (msg) => {
                   document.getElementById("output").textContent = msg;
                   console.log(msg);
                 }
               };
             
             
             if (!SpeechRecognition) {
               console.error("SpeechRecognition is not supported in this browser.");
             } else {
               const r = new SpeechRecognition();
               r.continuous = false;
               r.interimResults = false;
               r.maxAlternatives = 1;
             
               r.onstart = function () {
                 console.log("Speech recognition started");
                 scrib.show("R is started");
               };
             
               r.onresult = async function (event) {
                 const transcript = event.results[0][0].transcript;
                 console.log("Transcript:", transcript);
                 scrib.show(`You said: ${transcript}`);
                 searchVideos(transcript)
               };
               r.start()
               console.log("started")
             }
                 }
  </script>
</body>
</html>